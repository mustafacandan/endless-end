{% extends "base.html" %}
{% block body %}

    <div class="mt-5">
    </div>
    <div class="row">
        <div class="col-md-5">
            <ul class="checktree">
            <li>
                {% for path in data.paths %}
                    <a id="pathNode" data-id="{{ path.id }}"><button class="btn btn-light" style="height: 14pt; line-height: 2pt;">{{ path.text[:20] }}</button></a>
                {% endfor %}

				<ul>
                    <li><button for="manager6" class="btn btn-light" style="height: 14pt; line-height: 2pt;"> + </button></li>
				</ul>
			</li>
		</ul>
        </div>

        <div class="col-md-6">

            <div id="pages">
            </div>


        </div>
    <div class="col-md-1">
    </div>
    </div>

    <!-- Include the Quill library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Initialize Quill editor -->
    <script>

        $(function(){
            $("ul.checktree").checktree();
        });

        var pathId = '{{ path_id }}';
        $(document).ready(function() {

              $("#pathNode").click(function(){
                  pathId = $(this).attr("data-id");
                // $("#hiddenArea").val($("#editor").html());
                // $.post( "/next", $( "#editorForm" ).serialize() );
                $.ajax({
                url: '/page/all/'+$(this).attr("data-id") ,
                type: 'POST',
                data: { text: $("#editor").html() },
                success: function(data) {
                    console.log(data);
                    var pages = $("#pages");
                    pages.empty()
                    $.each(data, function(i){
                        pages.append("<div><a href=/compose/Macera-Tuneli/page/"+ data[i].id + ">"+data[i].content+"</a></div>");
                        pages.append("</div>");
                    });
                        pages.append("<div><a href=/compose/Macera-Tuneli/page/new/"+  data[0].path_id +"> + New</a></div>")

                },
                });
            });
        });
    </script>
{% endblock %}
